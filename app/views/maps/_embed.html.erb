<%- style_class     = nil if local_assigns[:klass].nil? -%>
<%- loading_message = ""  if local_assigns[:loading_message].nil? -%>

<%= content_tag(:div, loading_message, :id => map.dom_token, :class => style_class) %>
<%= javascript_include_tag "#{GeoIQ.base_uri}/javascripts/f1.api.js" %>
<script type="text/javascript" charset="utf-8">
;(function() {
  F1.host = <%= geoiq_proxy_url("").inspect %>;
  var map = new F1.Maker.Map({
    dom_id: <%= map.dom_token.inspect %>,
    map_id: <%= map.geoiq_map_xid.inspect %>,
    uiLayers: false,
    onload: function() { map.showControl("legend", true, "open"); }
  });
})();
</script>
