- title "Create a Map"
- body_class "form"
- content_for :javascripts do
  = javascript_include_tag "jquery.form.min.js"
  = javascript_include_tag "jquery.blockUI.min.js"

.heading
  %h2 Create a Map
  %p.description
    Get started by uploading or pasting your data, selecting the entries you
    want to map, providing a title, and shazam you have an instant map.

%fieldset.import{ "data-step" => "Start Here" }
  .upload
    - form_tag preprocess_new_map_path, :class => "preprocess-form" do
      = label_tag "preprocess-upload", "&nbsp;"
      - link_to "javascript:return false;", :class => "file" do
        Upload File
        = file_field_tag :data, :id => "preprocess-upload"
    .hint Excel Spreadsheet or CSV
  .paste
    - form_tag preprocess_new_map_path, :class => "preprocess-form" do
      = label_tag "preprocess-paste", "Copy &amp; Paste Data"
      = text_area_tag :data, "", :id => "preprocess-paste"
    .hint Columns names must be in the first row.
  .or OR

- form_for @map do |f|
  = f.hidden_field :original_csv_data
  %section.post-process{ :style => (@map.original_csv_data.blank? ? "display: none;" : nil) }
    %fieldset.location.required{ "data-step" => "Next Step" }
      = f.label :location_column_name, "Select Location"
      .detail Please select the column that you want to use for mapping location.
      .input
        Show
        = f.select :location_column_name, options_for_select([]), {}, :class => "column-names required"
        as
        = f.select :location_column_type, location_type_options, {}, :class => "required"
      .hint sample, sample, sample

    %fieldset.data.required{ "data-step" => "Next Step" }
      = f.label :data_column_name, "Select Data"
      .detail Please select the numeric data field that you want to display.
      .input
        Show
        = f.select :data_column_name, options_for_select([]), {}, :class => "column-names required"
        as
        = f.select :data_column_type, data_type_options, {}, :class => "required"
      .hint sample, sample, sample

    %fieldset.title.required{ "data-step" => "Customize" }
      = f.label :title, "Map Title"
      = f.text_field :title, :class => [(@map.new_record? ? "suggested" : nil), "required"].join(" ")

  .actions
    = f.submit "Create Map"

#pointer{ "data-overlay" => "4" }
  .content Step 1